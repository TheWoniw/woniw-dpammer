#!/bin/zsh

VENV_DIR=${1:-venv}

# If venv doesn't exist, create it and install deps
if [[ ! -d "$VENV_DIR" ]]; then
  echo "Creating virtual environment in ./${VENV_DIR} ..."
  python3 -m venv $VENV_DIR

  if [[ $? -ne 0 ]]; then
    echo "Failed to create virtual environment."
    exit 1
  fi

  echo "Activating virtual environment..."
  source $VENV_DIR/bin/activate

  echo "Installing dependencies..."
  pip install --upgrade pip
  pip install pyautogui
else
  echo "Virtual environment already exists. Activating..."
  source $VENV_DIR/bin/activate
fi

echo "Setup complete! Virtual environment '$VENV_DIR' is active."
echo "Running bot..."

# Run your bot using full imports (not relative ones!)
python bot.py
